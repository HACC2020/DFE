{% extends "directory.html" %}

{% comment %}
    Home page with charts
    Copyright (C) 2020  DFE

    This program is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program.  If not, see <https://www.gnu.org/licenses/>.
{% endcomment %}

{% block content %}

<body>
<script>

    var listed = [{% for i in sub %}
    {"name":"{{i.name}} (Sub-Department)","link":"/directory{{i.ownerAgencyName}}/{{i.name}}/"},{% endfor %}
    {% for i in apps %}
    {"name":"{{i.name}} (Application)","link":"/directory/{{i.subOwnerAgencyName}}/"},{% endfor %}
    {% for i in projects %}
    {"name":"{{i.name}} (Project)","link":"/directory/applications/{{i.name}}/"},{% endfor %}];

console.log(listed);
//Put actual data in listed

function myFunction() {
  // Declare variables
  var input, filter, ul, li, a, i;
  input = document.getElementById("mySearch");
  filter = input.value.toUpperCase();
  ul = document.getElementById("myMenu");
  li = ul.getElementsByTagName("li");


  //console.log(input.value);
  var counter=0;
  for(i = 0; i < listed.length; i++)
  {
      var currentId=("myMenu" + String(counter));
      var bruh = document.getElementById(currentId);
      var name = listed[i]['name'];
      var link = listed[i]['link'];
      //console.log(name.toUpperCase().indexOf(filter) > -1);
      if (name.toUpperCase().indexOf(filter) > -1 && counter<8)
      {
        bruh.style.display = "block";
        li[counter].style.display = "block";
        bruh.href=link;
        bruh.innerHTML=name;
        //console.log("loaded "+name);
        counter++;
      };
  }

  var countered=counter;

  while(counter<8)
  {
    var currentId=("myMenu" + String(counter));
    var bruh = document.getElementById(currentId);
    bruh.style.display = "none";
    li[counter].style.display = "none";
    counter++;
  }

  if(countered==0)
  {
    //console.log("EXTRAFUNCTION: Counter");
    var currentId=("myMenu" + String(countered));
    var bruh = document.getElementById(currentId);
    bruh.href='#';
    bruh.style.display = "block";
    li[countered].style.display = "block";
    bruh.innerHTML="No results found.";
  }

  if(input.value=="")
  {
    //console.log("EXTRAFUNCTION: Blanker");
    //console.log(li.length);
    for (i = 0 ; i < li.length-1; i++)
    {
        var caller = ("myMenu" + String(i));
        console.log(caller);
        var bruh = document.getElementById(caller);
        //console.log(bruh);
        bruh.style.display = "none";
        li[i].style.display = "none";
    }
  }
  //console.log(counter);
  //console.log('-----------------------BREAK-----------------------');
}










</script>
<!--<input type="text" id="mySearch" onkeyup="myFunction()" placeholder="Search" title="Type in a category">-->

<ul id="myMenu">
    <li><a href="#" id="myMenu0"></a></li>
    <li><a href="#" id="myMenu1"></a></li>
    <li><a href="#" id="myMenu2"></a></li>
    <li><a href="#" id="myMenu3"></a></li>
    <li><a href="#" id="myMenu4"></a></li>
    <li><a href="#" id="myMenu5"></a></li>
    <li><a href="#" id="myMenu6"></a></li>
    <li><a href="#" id="myMenu7"></a></li>
    <li><a href="#" id="myMenu8"></a></li>
</ul>
</body>
</html>

<div class="name text-light" style=" max-height:100%;">
    <div class="position-static overflow-hidden p-3 p-md-5 m-md-3 text-center ">
        <div class="col-md-9 p-lg-5 mx-auto my-5  ">
            <h1 class="display-4 font-weight-normal  ">
                Defining Future Expectations
            </h1>
            <p class="lead font-weight-normal ">
                The DFE project provides public access to the State of Hawaii’s IT Portfolio with the aim of providing meaningful data and visualizations
            </p>
        </div>
    </div>
</div>

<div class="container">

    <table class="table table-bordered  ">
        <thead class="thead-dark">

        <th scope="col">Project Risk</th>
        <tbody>
        <td>
            <div id="graphs">
                <iframe style="float:left; background: #FFFFFF;border: none;border-radius: 2px;box-shadow: 0 2px 10px 0 rgba(70, 76, 79, .2);"
                        width="100%" height="480"
                        src="https://charts.mongodb.com/charts-project-0-yyucg/embed/charts?id=b77ba076-22d4-4c1a-a84f-41a33fe58254&theme=light%22%3E"></iframe>
            </div>
        </td>
        </tbody>


        <table class="table table-bordered m-sm-t-10 m-y-sm-3">
            <thead class="thead-dark">

            <th scope="col">Business Value</th>
            <tbody>
            <td>
                <iframe style="float:right;background-color: #FFFFFF;border: none;border-radius: 2px;box-shadow: 0 2px 10px 0 rgba(70, 76, 79, .2);"
                        width="100%" height="480; "
                        src="https://charts.mongodb.com/charts-project-0-yyucg/embed/charts?id=2f1d0759-1c28-42d9-bcfe-19a2ec9bf94f&theme=light%22%3E"></iframe>

            </td>
            </tbody>


            </thead>
        </table>

        </thead>
    </table>
</div>


<!--        <div class="container">-->
<!--         <div class="alert alert-primary" role="alert"> -->
<!--  Overall metrics for the entire IT portfolio are displayed above, separated by applications and projects. Applications are actual software systems underneath each respective department and the projects are associated with how the work to update the system is done. An application/project can be defined as “completed” when the department that owns it fills out all the data columns that are provided by ETS. If any data column fails to be completed, that application/project automatically becomes flagged as uncompleted. -->
<!--           <button type="button" class="close" data-dismiss="alert" aria-label="Close"> -->
<!--     <span aria-hidden="true">&times;</span> -->
<!--           </button> -->
<!--         </div> -->
<!--     </div>-->

{% endblock %}

