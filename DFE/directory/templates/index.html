{% extends "directory.html" %}

{% block content %}

<head>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
</head>


<nav class="navbar navbar-expand-md navbar-dark" style="background-color: #0256d4">
    <div class="navbar-brand">
        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Seal_of_the_State_of_Hawaii.svg/600px-Seal_of_the_State_of_Hawaii.svg.png" width=50 height=50 class="d-inline-block align-top" loading="lazy">
        <span class="navbar-text text-white"><b>State of Hawaii IT Portfolio</b></span>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbar">
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Departments</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-light" href="#">Contact</a>
            </li>
        </ul>
        <form class="form-inline my-2 my-lg-0">
            <input class="form-control mr-sm-2" type="search" placeholder="Search">
            <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
        </form>
    </div>
</nav>
<body >











<div class="name" style=" max-height:100%;">



    <div class="position-static overflow-hidden p-3 p-md-5 text-center my-0">




        <div class="col-md-9 p-lg-5 mx-auto my-5 text-white  ">

            <h1 class="display-4 font-weight-normal  ">
                Project Name
            </h1>
            <p class="lead font-weight-normal ">
                You can use this page to browse different departments and their sub-departments
            </p>





        </div>
    </div>



    <div class="container ">


        <div class="row" >
            <div class="col-sm">


                <table class="table table-bordered text center table-wrapper-scroll-y my-custom-scrollbar">


                    <thead class="thead-dark">
                    <tr>

                    </tr>
                    </thead>
                    <tbody>
                    <tr>
                        <td style="text-align:center;">Information<br>Owner<br>Project Status<br>Business Value<br>Project Risk</td>

                    </tr>
                    <tr>
                        <td style="text-align:center;">Dates<br>Approval Date<br>Plan date<br>Start Date<br>Completed Date<br>Cancelled</td>

                    </tr>
                    <tr>

                    </tr>


                    </tbody>
                </table>
                <div class="table-responsive">
                    <table class="table">
                        <td><!-- Load d3.js -->
                            <script src="https://d3js.org/d3.v4.js"></script>

                            <!-- Create a div where the graph will take place -->
                            <div id="my_dataviz"></div>


                            <script>

// set the dimensions and margins of the graph
var width = 460
var height = 460

// append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width)
    .attr("height", height)
  .append("g")
    .attr("transform", "translate(40,0)");  // bit of margin on the left = 40

// read json data
var data1 = {
    "children":
        [
            {% for i in listofapps %}
            {"name":"{{ i }}", "colname": "level2"},
            {% endfor %}
        ],
    "name":"{% for i in projectinfo %}{{ i.name }}{% endfor %}"}
treeJSON = function(data) {
    console.log(data1)
  // Create the cluster layout:
  var cluster = d3.cluster()
    .size([height, width - 100]);  // 100 is the margin I will have on the right side

  // Give the data to this cluster layout:
  var root = d3.hierarchy(data, function(d) {
      return d.children;
  });
  cluster(root);


  // Add the links between nodes:
  svg.selectAll('path')
    .data( root.descendants().slice(1) )
    .enter()
    .append('path')
    .attr("d", function(d) {
        return "M" + d.y + "," + d.x
                + "C" + (d.parent.y + 50) + "," + d.x
                + " " + (d.parent.y + 150) + "," + d.parent.x // 50 and 150 are coordinates of inflexion, play with it to change links shape
                + " " + d.parent.y + "," + d.parent.x;
              })
    .style("fill", 'none')
    .attr("stroke", '#ccc')


  // Add a circle for each node.

  var you = svg.selectAll("g")
      .data(root.descendants())
      .enter()
      .append("g")
      .attr("transform", function(d) {
          return "translate(" + d.y + "," + d.x + ")"
      })

    you.append("circle")
        .attr("r", 7)
        .style("fill", "#69b3a2")
        .attr("stroke", "black")
        .style("stroke-width", 2)
    you.append("text")
        .text(function (d) {
            return d.data.name; })

}
treeJSON(data1);
</script>
                        </td>
                    </table>
                </div>

            </div>


        </div>
    </div>
</div>


</body>

{% endblock %}
